:root{--bg:#0f1113;--lamp:#1f2124;--accent:#ffd66b;--envelope:#ffd66b}
*{box-sizing:border-box;font-family:Inter,Arial,Helvetica,sans-serif}
html,body,#app{height:100%}
.body-bg{background:var(--bg)}
body{margin:0;background:radial-gradient(420px 200px at 50% 10%, rgba(255,214,107,0.06), transparent 25%), var(--bg);display:flex;align-items:center;justify-content:center;padding:24px}
.stage{width:720px;max-width:96%;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));border-radius:12px;padding:18px;box-shadow:0 12px 40px rgba(0,0,0,0.45)}
.info-banner{text-align:center;margin-bottom:18px;padding:12px;background:rgba(255,214,107,0.08);border-radius:8px;color:#fff}
.info-banner h1{margin:6px 0;font-size:16px;color:#ffd66b}
.info-banner p{margin:4px 0;font-size:12px;opacity:0.9}
.info-banner .deadline{font-weight:bold;color:#fff1a8}
.share-link{margin-top:10px;display:flex;flex-direction:column;align-items:center}
.share-link p{margin:0;color:#fff}
.share-link a{margin-top:4px;padding:6px 10px;background:rgba(255,255,255,0.1);border-radius:4px;font-size:11px}
.controls{display:flex;gap:8px;align-items:center;margin-bottom:18px;flex-wrap:wrap}
.controls label{flex:1;min-width:100%;display:flex;flex-direction:column;color:#fff;font-size:12px}
.controls textarea{flex:1;padding:10px;border:1px solid rgba(255,255,255,0.2);border-radius:6px;background:rgba(255,255,255,0.05);color:#fff;font-family:inherit;font-size:13px;resize:vertical;min-height:60px}
.controls textarea::placeholder{color:rgba(255,255,255,0.5)}
.controls button{padding:8px 14px;border:none;background:#3b82f6;color:#fff;border-radius:8px;cursor:pointer;font-size:12px}
.lamp-area{position:relative;height:340px;border-radius:8px;background:radial-gradient(circle at 50% 18%, rgba(255,214,107,0.10), rgba(0,0,0,0) 28%), linear-gradient(180deg,#0a0b0d 0%, #0f1113 100%);display:flex;align-items:flex-start;justify-content:center;padding-top:18px}
.room-decor{position:absolute;inset:12px 18px auto 18px;pointer-events:none;display:block}
.icon{position:absolute;width:86px;height:86px;opacity:0.95}
.balloon{left:8%;top:10%;transform:scale(1)}
.star{right:10%;top:8%;transform:scale(0.9)}
.icon path, .icon ellipse{filter:drop-shadow(0 8px 20px rgba(0,0,0,0.28))}

@keyframes floaty {0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}}
.balloon{animation:floaty 5.5s ease-in-out infinite}
.star{animation:floaty 6.5s ease-in-out infinite}
.lamp{position:relative;width:120px;height:160px}
.shade{position:absolute;left:50%;transform:translateX(-50%);top:0;width:160px;height:90px;background:var(--lamp);border-radius:80px 80px 40px 40px;transition:box-shadow 240ms}
.bulb{position:absolute;left:50%;transform:translateX(-50%);top:60px;width:46px;height:46px;background:var(--accent);box-shadow:0 8px 30px rgba(255,214,107,0.14);border-radius:50%;transition:box-shadow 240ms, transform 180ms}

/* Lamp on/off styles */
.lamp.on .bulb{box-shadow:0 30px 140px rgba(255,214,107,0.28), 0 8px 40px rgba(255,200,80,0.18);transform:scale(1.02)}
.lamp.off .bulb{box-shadow:0 6px 18px rgba(0,0,0,0.35);background:#b08b2b}
.lamp.on ~ .drop-zone, .lamp.on + .drop-zone { }

/* lamp-area when lit */
.lamp-area.light{background:radial-gradient(circle at 50% 18%, rgba(255,214,107,0.22), rgba(0,0,0,0) 32%), linear-gradient(180deg,#0a0b0d 0%, #0f1113 100%)}
.hook{position:absolute;left:50%;transform:translateX(-50%);top:0;width:6px;height:20px;background:#555;border-radius:3px}
.drop-zone{position:absolute;left:50%;transform:translateX(-50%);top:130px;width:260px;height:200px;pointer-events:none}

.rug{position:absolute;left:50%;transform:translateX(-50%);bottom:6px;width:420px;height:84px;background:radial-gradient(closest-side, rgba(255,120,80,0.12), rgba(255,120,80,0.06));border-radius:60px;box-shadow:0 22px 40px rgba(0,0,0,0.5);pointer-events:none}

/* Day / Night variants */
.lamp-area.day{background:radial-gradient(circle at 50% 8%, rgba(255,255,255,0.06), rgba(0,0,0,0) 32%), linear-gradient(180deg,#cfe9ff 0%, #e9f3ff 100%)}
.lamp-area.day .icon path, .lamp-area.day .icon ellipse{filter:drop-shadow(0 6px 12px rgba(0,0,0,0.12))}
.stage.day{box-shadow:0 12px 40px rgba(0,0,0,0.12);background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.95))}
.controls button{background:#3b82f6}
.lamp-area.night{/* default night styles already apply */}


.envelope{position:absolute;left:50%;transform:translateX(-50%);width:220px;height:120px;background:var(--envelope);border-radius:6px;border:2px solid rgba(0,0,0,0.12);box-shadow:0 12px 36px rgba(0,0,0,0.4);overflow:visible}
.envelope .flap{position:absolute;top:0;left:0;width:100%;height:50%;background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(255,255,255,0.7));clip-path:polygon(0 0,50% 100%,100% 0)}
.envelope .body{position:absolute;bottom:0;left:0;width:100%;height:60%;padding:12px;display:flex;flex-direction:column;align-items:center;justify-content:center}
.envelope .text{color:#222;font-size:13px;line-height:1.3;text-align:center;padding:3px 0;flex:1}
.envelope .date{color:#999;font-size:10px;text-align:center;padding-top:4px;border-top:1px solid #e0e0e0}

/* Note that will pop out of the envelope */
.note{position:absolute;left:50%;transform:translateX(-50%) translateY(8px);bottom:8px;width:180px;height:84px;background:#fff;border-radius:8px;border:1px solid rgba(0,0,0,0.08);box-shadow:0 18px 36px rgba(2,6,10,0.5);padding:10px;display:flex;align-items:center;justify-content:center;text-align:center;color:#111;font-size:13px;opacity:0;transition:transform 300ms cubic-bezier(.2,.9,.2,1),opacity 260ms}
.envelope.open .note{transform:translateX(-50%) translateY(-86px);opacity:1}

@keyframes drop {
  0%{transform:translateX(-50%) translateY(-260px) rotate(-4deg);opacity:0}
  60%{opacity:1}
  80%{transform:translateX(-50%) translateY(12px) rotate(2deg)}
  100%{transform:translateX(-50%) translateY(0) rotate(0)}
}

.envelope.drop{animation:drop 700ms cubic-bezier(.22,.9,.25,1) forwards}

.envelope.open .flap{transform-origin:50% 0;transform:translateY(-6px) rotateX(180deg);transition:transform 260ms}

